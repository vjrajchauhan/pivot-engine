# Value Filter Specification
Version: 1.0
Applies To: Pivot Engine Core

## 1. Objective
Implement value-based filtering for pivot tables with behavior aligned to Microsoft Excel Pivot Tables.

The filter operates on aggregated values computed per pivot label item.

## 2. Filter Types
- **Equals**: Include items where the aggregated value equals a specified value.
- **Does Not Equal**: Include items where the aggregated value does not equal a specified value.
- **Greater Than**: Include items where the aggregated value is greater than a specified value.
- **Greater Than Or Equal To**: Include items where the aggregated value is greater than or
- **Less Than**: Include items where the aggregated value is less than a specified value.
- **Less Than Or Equal To**: Include items where the aggregated value is less than or equal to a specified value.
- **Top N**: Include the top N items based on aggregated values.
- **Bottom N**: Include the bottom N items based on aggregated values.

## 3. Behavior

I will have the pivot table already, we have to do the filter on top of the pivot table and we still have access to the source table.

#### Equals :
Include items where the aggregated value equals a specified value.

#### Source table:
all rows with c0 = Date, c1 = COLOR, c2 = Region, c3 = 1234 Units, etc..

+----+---------+---------+-------+--------+-----------------------------------------+-----+-------+-----+-----+---------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+-----------------------------------------+
| id | c0      | c1      | c2    | c3     | c4                                      | c5  | c6    | c7  | c8  | c9      | c10                                     | c11                                                                                                                                                                                                                                                                                                     | c12   | c13                                     |
+----+---------+---------+-------+--------+-----------------------------------------+-----+-------+-----+-----+---------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+-----------------------------------------+
| 1  | 2.0     | Blue    | North | 1.0    | {val: 20/11/1900, val_type: 4}          | 1.0 | 2.54  | 1.0 | 3.0 | #VALUE! | {val: 20/11/1900, val_type: 4}          | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                        | TRUE  | {val: 20/11/1900, val_type: 4}          |
| 2  | 338.0   |         | South | 23.0   | {val:  NULL , val_type: 5}              | 2.0 | 3.54  | 2.0 | 2.0 | #NAME?  | {val:  NULL , val_type: 5}              | {val: 345983987465938000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                                                             | TRUE  | {val: FALSE, val_type: 2}               |
| 3  | 33576.0 | Blue    | West  | 1.0    | {val: 23/12/2016, val_type: 4}          | 3.0 | 4.54  | 1.0 | 2.0 | #NUM!   | {val: 23/12/2016, val_type: 4}          | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                                                                                 | FALSE | {val: 23/12/2016, val_type: 4}          |
| 4  | 14.0    | Yellow  | North | 18.0   | {val: 30/12/2006 12:24:34, val_type: 4} | 1.0 | 5.54  | 1.0 | 2.0 | #DIV/0! | {val: 30/12/2006 12:24:34, val_type: 4} | {val:  NULL , val_type: 5}                                                                                                                                                                                                                                                                              | FALSE | {val: 30/12/2006 12:24:34, val_type: 4} |
| 5  | 1440.0  | Yellow  | North | 15.0   | {val: 14.5, val_type: 0}                | 2.0 | 6.54  | 2.0 | 2.0 | #N/A    | {val: 14.5, val_type: 0}                | {val: 34.5983987465938, val_type: 0}                                                                                                                                                                                                                                                                    | TRUE  | {val: 14.5, val_type: 0}                |
| 6  | 31025.0 | Blue    | South | -2.0   | {val: 20/11/1900 12:23:12, val_type: 4} | 3.0 | 7.54  | 2.0 | 2.0 | #REF!   | {val: 20/11/1900 12:23:12, val_type: 4} | {val: 345983987465938, val_type: 0}                                                                                                                                                                                                                                                                     | FALSE | {val: 20/11/1900 12:23:12, val_type: 4} |
| 7  | 2176.0  | (blank) | North | 5.7653 | {val: TRUE, val_type: 2}                | 1.0 | 8.13  | 2.0 | 1.0 | #REF!   | {val: TRUE, val_type: 2}                | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | TRUE  | {val: TRUE, val_type: 2}                |
| 8  | 73.0    | Green   | South | 5.0    | {val: 31/12/1899, val_type: 4}          | 2.0 | 9.96  | 2.0 | 2.0 | #REF!   | {val: 31/12/1899, val_type: 4}          | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | FALSE | {val: #DIV/0!, val_type: 3}             |
| 9  | 2.0     | Group   | West  | 8.0    | {val: sheet, val_type: 1}               | 3.0 | 10.99 | 2.0 | 1.0 | #REF!   | {val: sheet, val_type: 1}               | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | FALSE | {val: sheet, val_type: 1}               |
| 10 | 13.0    | Blue    | East  |        | {val: 84, val_type: 0}                  | 1.0 | 11.54 | 1.0 | 0.0 | #VALUE! | {val: 84, val_type: 0}                  | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | TRUE  | {val: 84, val_type: 0}                  |
| 11 | 704.0   | Green   | North | 9.0    | {val: 04/01/1900 03:34:34, val_type: 4} | 2.0 | 12.62 | 1.0 | 2.0 | #NAME?  | {val: 04/01/1900 03:34:34, val_type: 4} | {val: 3.45983987465938E+374, val_type: 1}                                                                                                                                                                                                                                                               |       | {val:  NULL , val_type: 5}              |
| 12 | 1070.0  | Blue    | South | 8.0    | {val: TRUE, val_type: 2}                | 5.0 | 13.52 | 2.0 | 4.0 | #NUM!   | {val: TRUE, val_type: 2}                | {val: 34598398746593800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0} | TRUE  | {val: TRUE, val_type: 2}                |
| 13 | 1440.0  | Green   | North | 1.0    | {val: 20/11/2002, val_type: 4}          | 1.0 | 14.57 | 2.0 | 1.0 | #DIV/0! | {val: 20/11/2002, val_type: 4}          | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     |       | {val: 20/11/2002, val_type: 4}          |
| 14 | 1805.0  | Red     | West  | 8.0    | {val: 96, val_type: 0}                  | 2.0 | 15.62 | 2.0 | 0.0 | #N/A    | {val: 96, val_type: 0}                  | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | FALSE | {val: #DIV/0!, val_type: 3}             |
| 15 |         | Red     | East  | 6.0    | {val: 14.5, val_type: 0}                | 3.0 | 16.53 | 2.0 | 0.0 | #REF!   | {val: 14.5, val_type: 0}                | {val: 3.45983987465938E+350, val_type: 1}                                                                                                                                                                                                                                                               | TRUE  | {val: 14.5, val_type: 0}                |
| 16 | 2532.0  | Green   | North | 5.0    | {val: android, val_type: 1}             | 1.0 | 17.98 | 2.0 | 1.0 | #REF!   | {val: android, val_type: 1}             | {val: 3459839874659380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, val_type: 0}                                                                                                     | TRUE  | {val: android, val_type: 1}             |
+----+---------+---------+-------+--------+-----------------------------------------+-----+-------+-----+-----+---------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+-----------------------------------------+

### Sample example 1:

#### Input:
`{
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 0,
        condition_type: EQUAL,
        condition_value_1: 34,
        condition_value_2: None,
    },
}
`
##### Pivot table before filter:
+-------------------------------------+-------------------------------------------+
| c2                                  | {val: Sum of 1234 Units, val_type: 12289} |
+-------------------------------------+-------------------------------------------+
| {val: East, val_type: 2048}         | 6.0                                       |
| {val: North, val_type: 2048}        | 54.765299999999996                        |
| {val: South, val_type: 2048}        | 34.0                                      |
| {val: West, val_type: 2048}         | 17.0                                      |
| {val: Grand Total, val_type: 12289} | 111.7653                                  |
+-------------------------------------+-------------------------------------------+

#### Output:
  After filter
  +-------------------------------------+-------------------------------------------+
  | c2                                  | {val: Sum of 1234 Units, val_type: 12289} |
  +-------------------------------------+-------------------------------------------+
  | {val: South, val_type: 2048}        | 34.0                                      |
  | {val: Grand Total, val_type: 12289} | 34.0                               |
  +-------------------------------------+-------------------------------------------+

#### Sample example 2:
#### Input:
`{
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 0,
        condition_type: EQUAL,
        condition_value_1: 34,
        condition_value_2: None,
    },
}
`

##### Pivot table before filter:
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                  | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}         |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: North, val_type: 2048}        | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: South, val_type: 2048}        |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: West, val_type: 2048}         |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Grand Total, val_type: 12289} | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Output:
  +-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                  | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+ 
| {val: South, val_type: 2048}        |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: Grand Total, val_type: 12289} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+     

#### Sample example 3:
#### Input:
`{
    (
        1,
        -1,
    ): AggregationFilter {
        axis: COLUMN,
        aggregation_index: 0,
        condition_type: EQUAL,
        condition_value_1: 20,
        condition_value_2: None,
    },
}
`

##### Pivot table before filter:
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                  | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}         |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: North, val_type: 2048}        | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: South, val_type: 2048}        |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: West, val_type: 2048}         |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Grand Total, val_type: 12289} | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+


#### Output: 
+-------------------------------------+------------------------------+-------------------------------------+
| c2                                  | {val: Green, val_type: 2048} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+------------------------------+-------------------------------------+
| {val: East, val_type: 2048}         |                              |                                     |
| {val: North, val_type: 2048}        | 15.0                         | 15.0                                |
| {val: South, val_type: 2048}        | 5.0                          | 5.0                                 |
| {val: West, val_type: 2048}         |                              |                                     |
| {val: Grand Total, val_type: 12289} | 20.0                         | 20.0                                |
+-------------------------------------+------------------------------+-------------------------------------+

#### Sample example 4:
#### Input:
`{
    (
        1,
        -1, 
    ): AggregationFilter {
        axis: COLUMN,
        aggregation_index: 0,
        condition_type: EQUAL,
        condition_value_1: 20,
        condition_value_2: None,
    },
`
##### Pivot table before filter:
+-------------------------------------+----------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------+-------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+------------------------------------------------------------------+------------------------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+
| c2                                  | {val: (blank), val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: (blank), val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Blue, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Blue, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Green, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Green, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Group, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Group, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Red, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Red, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Yellow, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Yellow, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: (blank), val_type: 10240}{val: Sum of 1234 Units, val_type: 1 } | {val: (blank), val_type: 10240}{val: Sum of Time, val_type: 2 } | {val: Total Sum of 1234 Units, val_type: 12289} | {val: Total Sum of Time, val_type: 12290} |
+-------------------------------------+----------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------+-------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+------------------------------------------------------------------+------------------------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+
| {val: East, val_type: 2048}         |                                                                      |                                                                |                                                                   | 1.0                                                         |                                                                    |                                                              |                                                                    |                                                              | 6.0                                                              | 3.0                                                        |                                                                     |                                                               |                                                                       |                                                                 | 6.0                                             | 4.0                                       |
| {val: North, val_type: 2048}        | 5.7653                                                               | 1.0                                                            | 1.0                                                               | 1.0                                                         | 15.0                                                               | 4.0                                                          |                                                                    |                                                              |                                                                  |                                                            | 33.0                                                                | 3.0                                                           |                                                                       |                                                                 | 54.765299999999996                              | 9.0                                       |
| {val: South, val_type: 2048}        |                                                                      |                                                                | 6.0                                                               | 8.0                                                         | 5.0                                                                | 2.0                                                          |                                                                    |                                                              |                                                                  |                                                            |                                                                     |                                                               | 23.0                                                                  | 2.0                                                             | 34.0                                            | 12.0                                      |
| {val: West, val_type: 2048}         |                                                                      |                                                                | 1.0                                                               | 3.0                                                         |                                                                    |                                                              | 8.0                                                                | 3.0                                                          | 8.0                                                              | 2.0                                                        |                                                                     |                                                               |                                                                       |                                                                 | 17.0                                            | 8.0                                       |
| {val: Grand Total, val_type: 12289} | 5.7653                                                               | 1.0                                                            | 8.0                                                               | 13.0                                                        | 20.0                                                               | 6.0                                                          | 8.0                                                                | 3.0                                                          | 14.0                                                             | 5.0                                                        | 33.0                                                                | 3.0                                                           | 23.0                                                                  | 2.0                                                             | 111.7653                                        | 33.0                                      |
+-------------------------------------+----------------------------------------------------------------------+----------------------------------------------------------------+-------------------------------------------------------------------+-------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+------------------------------------------------------------------+------------------------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+

#### Output:
 - Note:  Only columns should effected, all the rwmainf rows are indpemnded they wont effected here,
   +-------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+
   | c2                                  | {val: Green, val_type: 2048}{val: Sum of 1234 Units, val_type: 1 } | {val: Green, val_type: 2048}{val: Sum of Time, val_type: 2 } | {val: Total Sum of 1234 Units, val_type: 12289} | {val: Total Sum of Time, val_type: 12290} |
   +-------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+
   | {val: East, val_type: 2048}         |                                                                    |                                                              |                                                 |                                           |
   | {val: North, val_type: 2048}        | 15.0                                                               | 4.0                                                          | 15.0                                            | 4.0                                       |
   | {val: South, val_type: 2048}        | 5.0                                                                | 2.0                                                          | 5.0                                             | 2.0                                       |
   | {val: West, val_type: 2048}         |                                                                    |                                                              |                                                 |                                           |
   | {val: Grand Total, val_type: 12289} | 20.0                                                               | 6.0                                                          | 20.0                                            | 6.0                                       |
   +-------------------------------------+--------------------------------------------------------------------+--------------------------------------------------------------+-------------------------------------------------+-------------------------------------------+


##### Sample example 5:
#### Input:
` {
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 0,
        condition_type: GREATER_THAN_OR_EQUAL_TO,
        condition_value_1: 20,
        condition_value_2: None,
    },
}
`
##### Pivot table before filter:

+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                              | Values                                | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}                     | {val: Sum of 1234 Units, val_type: 1} |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: East, val_type: 2048}                     | {val: Sum of Time, val_type: 2}       |                                | 1.0                         |                              |                              | 3.0                        |                               |                                 | 4.0                                 |
| {val: North, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: North, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: South, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: South, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of 1234 Units, val_type: 1} |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of Time, val_type: 2}       |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                                       | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                                       | 1.0                            | 13.0                        | 6.0                          | 3.0                          | 5.0                        | 3.0                           | 2.0                             | 33.0                                |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Output:
 - Note: considering only the rows where Total Sum of 1234 Units is greater than or equal to 20, which are {val: North, val_type: 2048} and {val: South, val_type: 2048} along with the grand total row. Hence only these two rows are present in the output along with the grand total row and all the columns.
 - Why becasue we are proving agg filter on 0 th index data.

+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                              | Values                                | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: North, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: North, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: South, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: South, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: Total Sum of 1234 Units, val_type: 12289} |                                       | 28.7653                        | 7.0                         | 20.0                         |                              |                            | 33.0                          | 23.0                            | 88.7653                             |
| {val: Total Sum of Time, val_type: 12290}       |                                       | 3.0                            | 9.0                         | 6.0                          |                              |                            | 3.0                           | 2.0                             | 21.0                                |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

##### Sample example 6:
#### Input:
`{
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 1,
        condition_type: GREATER_THAN_OR_EQUAL_TO,
        condition_value_1: 8,
        condition_value_2: None,
    },
}
`

##### Pivot table before filter:
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                              | Values                                | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}                     | {val: Sum of 1234 Units, val_type: 1} |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: East, val_type: 2048}                     | {val: Sum of Time, val_type: 2}       |                                | 1.0                         |                              |                              | 3.0                        |                               |                                 | 4.0                                 |
| {val: North, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: North, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: South, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: South, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of 1234 Units, val_type: 1} |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of Time, val_type: 2}       |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                                       | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                                       | 1.0                            | 13.0                        | 6.0                          | 3.0                          | 5.0                        | 3.0                           | 2.0                             | 33.0                                |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Output:
 - Note: considering only the rows where Total Sum of Time is greater than or equal to 8, which are {val: North, val_type: 2048}, {val: South, val_type: 2048} and {val: West, val_type: 2048} along with the grand total row. Hence only these two rows are present in the output along with the grand total row and all the columns.
 - Why becasue we are proving agg filter on 1 th index data.

+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                              | Values                                | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: North, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: North, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: South, val_type: 2048}                    | {val: Sum of 1234 Units, val_type: 1} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: South, val_type: 2048}                    | {val: Sum of Time, val_type: 2}       |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of 1234 Units, val_type: 1} |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: West, val_type: 2048}                     | {val: Sum of Time, val_type: 2}       |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                                       | 28.7653                        | 8.0                         | 20.0                         | 8.0                          | 8.0                        | 33.0                          | 23.0                            | 105.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                                       | 3.0                            | 12.0                        | 6.0                          | 3.0                          | 2.0                        | 3.0                           | 2.0                             | 29.0                                |
+-------------------------------------------------+---------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+


## Special cases

 - With values !

#### Sample example 7:
#### Input:
`pivot_table: {
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 1,
        condition_type: GREATER_THAN_OR_EQUAL_TO,
        condition_value_1: 8,
        condition_value_2: None,
    },
}`

##### Pivot table before filter:

+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| Values                                          | c2                           | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: Sum of 1234 Units, val_type: 1}           | {val: East, val_type: 2048}  |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: Sum of 1234 Units, val_type: 1}           | {val: North, val_type: 2048} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: Sum of 1234 Units, val_type: 1}           | {val: South, val_type: 2048} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: Sum of 1234 Units, val_type: 1}           | {val: West, val_type: 2048}  |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: East, val_type: 2048}  |                                | 1.0                         |                              |                              | 3.0                        |                               |                                 | 4.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: North, val_type: 2048} | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: South, val_type: 2048} |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: West, val_type: 2048}  |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                              | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                              | 1.0                            | 13.0                        | 6.0                          | 3.0                          | 5.0                        | 3.0                           | 2.0                             | 33.0                                |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Output:
 - Note: Only Sum of time rows effected, becasue we given input filter on 1 th index data and in that only Sum of time rows have value greater than or equal to 8, which are {val: North, val_type: 2048}, {val: South, val_type: 2048} and {val: West, val_type: 2048} along with the grand total row. Hence only these two rows are present in the output along with the grand total row and all the columns.
 - Why becasue we are proving agg filter on 1 th index data.

+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| Values                                          | c2                           | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: Sum of 1234 Units, val_type: 1}           | {val: East, val_type: 2048}  |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: Sum of 1234 Units, val_type: 1}           | {val: North, val_type: 2048} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: Sum of 1234 Units, val_type: 1}           | {val: South, val_type: 2048} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: Sum of 1234 Units, val_type: 1}           | {val: West, val_type: 2048}  |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: North, val_type: 2048} | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: South, val_type: 2048} |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: West, val_type: 2048}  |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                              | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                              | 1.0                            | 13.0                        | 6.0                          | 3.0                          | 5.0                        | 3.0                           | 2.0                             | 33.0                                |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Sample example 8:
#### Input:
` {
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 1,
        condition_type: GREATER_THAN_OR_EQUAL_TO,
        condition_value_1: 8,
        condition_value_2: None,
    },
    (
        1,
        -1,
    ): AggregationFilter {
        axis: COLUMN,
        aggregation_index: 1,
        condition_type: GREATER_THAN_OR_EQUAL_TO,
        condition_value_1: 8,
        condition_value_2: None,
    },
}
`

##### Pivot table before filter:

+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| Values                                          | c2                           | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: Sum of 1234 Units, val_type: 1}           | {val: East, val_type: 2048}  |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: Sum of 1234 Units, val_type: 1}           | {val: North, val_type: 2048} | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: Sum of 1234 Units, val_type: 1}           | {val: South, val_type: 2048} |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: Sum of 1234 Units, val_type: 1}           | {val: West, val_type: 2048}  |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: East, val_type: 2048}  |                                | 1.0                         |                              |                              | 3.0                        |                               |                                 | 4.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: North, val_type: 2048} | 1.0                            | 1.0                         | 4.0                          |                              |                            | 3.0                           |                                 | 9.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: South, val_type: 2048} |                                | 8.0                         | 2.0                          |                              |                            |                               | 2.0                             | 12.0                                |
| {val: Sum of Time, val_type: 2}                 | {val: West, val_type: 2048}  |                                | 3.0                         |                              | 3.0                          | 2.0                        |                               |                                 | 8.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                              | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
| {val: Total Sum of Time, val_type: 12290}       |                              | 1.0                            | 13.0                        | 6.0                          | 3.0                          | 5.0                        | 3.0                           | 2.0                             | 33.0                                |
+-------------------------------------------------+------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### Output:

+-------------------------------------------------+------------------------------+-----------------------------+-------------------------------------+
| Values                                          | c2                           | {val: Blue, val_type: 2048} | {val: Grand Total, val_type: 12289} |
+-------------------------------------------------+------------------------------+-----------------------------+-------------------------------------+
| {val: Sum of 1234 Units, val_type: 1}           | {val: East, val_type: 2048}  |                             |                                     |
| {val: Sum of 1234 Units, val_type: 1}           | {val: North, val_type: 2048} | 1.0                         | 1.0                                 |
| {val: Sum of 1234 Units, val_type: 1}           | {val: South, val_type: 2048} | 6.0                         | 6.0                                 |
| {val: Sum of 1234 Units, val_type: 1}           | {val: West, val_type: 2048}  | 1.0                         | 1.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: North, val_type: 2048} | 1.0                         | 1.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: South, val_type: 2048} | 8.0                         | 8.0                                 |
| {val: Sum of Time, val_type: 2}                 | {val: West, val_type: 2048}  | 3.0                         | 3.0                                 |
| {val: Total Sum of 1234 Units, val_type: 12289} |                              | 8.0                         | 8.0                                 |
| {val: Total Sum of Time, val_type: 12290}       |                              | 13.0                        | 13.0                                |
+-------------------------------------------------+------------------------------+-----------------------------+-------------------------------------+

#### Sample example 9:
#### Input:
`{
    (
        1,
        -1,
    ): AggregationFilter {
        axis: COLUMN,
        aggregation_index: 0,
        condition_type: GREATER_THAN,
        condition_value_1: 20,
        condition_value_2: None,
    },
    (
        2,
        -1,
    ): AggregationFilter {
        axis: ROW,
        aggregation_index: 0,
        condition_type: EQUAL,
        condition_value_1: 0,
        condition_value_2: None,
    },
}`

##### Pivot table before filter:

+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                  | {val: (blank), val_type: 2048} | {val: Blue, val_type: 2048} | {val: Green, val_type: 2048} | {val: Group, val_type: 2048} | {val: Red, val_type: 2048} | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}         |                                |                             |                              |                              | 6.0                        |                               |                                 | 6.0                                 |
| {val: North, val_type: 2048}        | 5.7653                         | 1.0                         | 15.0                         |                              |                            | 33.0                          |                                 | 54.765299999999996                  |
| {val: South, val_type: 2048}        |                                | 6.0                         | 5.0                          |                              |                            |                               | 23.0                            | 34.0                                |
| {val: West, val_type: 2048}         |                                | 1.0                         |                              | 8.0                          | 8.0                        |                               |                                 | 17.0                                |
| {val: Grand Total, val_type: 12289} | 5.7653                         | 8.0                         | 20.0                         | 8.0                          | 14.0                       | 33.0                          | 23.0                            | 111.7653                            |
+-------------------------------------+--------------------------------+-----------------------------+------------------------------+------------------------------+----------------------------+-------------------------------+---------------------------------+-------------------------------------+

#### output :
 - Note : Empty is considered as Zero here
+-------------------------------------+-------------------------------+---------------------------------+-------------------------------------+
| c2                                  | {val: Yellow, val_type: 2048} | {val: (blank), val_type: 10240} | {val: Grand Total, val_type: 12289} |
+-------------------------------------+-------------------------------+---------------------------------+-------------------------------------+
| {val: East, val_type: 2048}         |                               |                                 |                                     |
| {val: West, val_type: 2048}         |                               |                                 |                                     |
| {val: Grand Total, val_type: 12289} |                               |                                 |                                     |
+-------------------------------------+-------------------------------+---------------------------------+-------------------------------------+


# Note all these cases understand well and try to implement in code and then you will understand more clearly.
#### Pointers to be remember while coding
 - The input table is already created , you can access the table from the pivot table manager object, and table meta, from pivot_table.table_name_meta.output_table
 - and these input you can find out in the filter on agg section of pivot table manager object. &get_immut_pivot_object(&pivot_data_manager, source_table_id, pivot_table_id).unwrap().field_data.filter_data.filters_on_agg; as of use these actul inut like this  for you case "{
   (
   2,
   -1,
   ): AggregationFilter {
   axis: ROW,
   aggregation_index: 0,
   condition_type: EQUAL,
   condition_value_1: 34,
   condition_value_2: None,
   },
   }
   "
 - create a folder in the filer folder in src called filter_on_agg_using_agent_mod, please do it, 
 - and the ouput would be a table in duckdb, for the oupu talso i will call with the same "pivot_table.table_name_meta.output_table" we wanetd to do everything on the same table here,
 - Understand the behvaioud and apply all the filters avaible here, use "FilterConditionType" enum here to compare and apply related filters !
